<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python提高篇 | Hakihi</title><meta name="author" content="Akihi"><meta name="copyright" content="Akihi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Python提高篇是为具备一定Python基础的开发者设计的进阶课程，深入探索Python的高级特性和实用技巧。">
<meta property="og:type" content="article">
<meta property="og:title" content="Python提高篇">
<meta property="og:url" content="https://hakihi.cn/2024/11/05/PythonPlus/index.html">
<meta property="og:site_name" content="Hakihi">
<meta property="og:description" content="Python提高篇是为具备一定Python基础的开发者设计的进阶课程，深入探索Python的高级特性和实用技巧。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202411041951132.jpg">
<meta property="article:published_time" content="2024-11-05T11:55:00.000Z">
<meta property="article:modified_time" content="2024-12-24T13:31:25.942Z">
<meta property="article:author" content="Akihi">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202411041951132.jpg"><link rel="shortcut icon" href="https://hakihi.oss-cn-shanghai.aliyuncs.com/images/AAA.png"><link rel="canonical" href="https://hakihi.cn/2024/11/05/PythonPlus/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"DIL6K2VYJV","apiKey":"fe5e3362c7b732a207ec473fecce2449","indexName":"Dream11","hits":{"per_page":3},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":320},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#fcc351","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python提高篇',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-24 21:31:25'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/readPercent.css"><link rel="stylesheet" href="/css/indent.css"><link rel="stylesheet" href="https://npm.elemecdn.com/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M505.4 878.6c-196.7 0-358-150.9-374.9-343.1 1-18.6 16.1-33.4 34.9-33.4 10.8 0 20.5 4.8 26.9 12.4 0.2 0.3 0.5 0.1 0.5-0.7 41.6 44.2 100.5 71.9 166.1 71.9 127.1 0 230.1-103 230.1-230.1 0-66.1-28-125.1-72.6-166.8 0.1-0.1 0.5-0.1 0.3-0.3-7-6.5-11.4-15.7-11.4-26.1 0-19 14.9-34.1 33.7-35.3 192.1 17.1 342.9 178.3 342.9 375 0 208-168.5 376.5-376.5 376.5z" fill="#ffffff" p-id="15001"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/images/NOTUC%7DUI2%5D00BZXQRB4%7BLH9_tmb.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent !important"><nav id="nav"><span id="blog-info"><a href="/" title="Hakihi"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/images/AAA.png"/></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python提高篇</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-05T11:55:00.000Z" title="发表于 2024-11-05 19:55:00">2024-11-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-24T13:31:25.942Z" title="更新于 2024-12-24 21:31:25">2024-12-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9537</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Python-数据可视化"><a href="#Python-数据可视化" class="headerlink" title="Python 数据可视化"></a>Python 数据可视化</h2><h3 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h3><p><strong>matplotlib</strong>是一个用于<strong>创建静态、动态和交互式可视化图形的 Python 库</strong>。它被广泛用于数据可视化，并且可以与多种操作系统和图形后端一起工作。</p>
<p>matplotlib 的<strong>主要组成部分是 pyplot</strong>，它是一个类似于 MATLAB 的绘图框架。pyplot 提供了一个 MATLAB 式的接口，可以隐式地创建图形和轴，使得绘图变得简单。</p>
<p>在<strong>Pycharm</strong>中需要安装 matplotlib 包 <code>pip install matplotlib</code></p>
<h3 id="mpld3"><a href="#mpld3" class="headerlink" title="mpld3"></a>mpld3</h3><p><strong>mpld3</strong> 是一个 Python 库，优势在于它能够将静态的 Matplotlib 图形转换为具有<strong>交互性的 D3.js 图形</strong>，使得用户可以<strong>通过鼠标交互</strong>来探索和操作图形。</p>
<p><code>pip install mpld3</code></p>
<h3 id="Spyder"><a href="#Spyder" class="headerlink" title="Spyder"></a>Spyder</h3><p>Pycharm 中绘图可能会出现图片无法正确显示颜色等问题，建议可视化代码运行在 Spyder 中。</p>
<p><strong>安装网址：</strong> <a target="_blank" rel="noopener" href="https://www.spyder-ide.org">Spyder：https://www.spyder-ide.org</a></p>
<blockquote>
<p>&emsp;&emsp;注：以下可视化代码截图，将会从 Spyder 中运行后截取。</p>
</blockquote>
<h3 id="制图步骤"><a href="#制图步骤" class="headerlink" title="制图步骤"></a>制图步骤</h3><h4 id="①-安装-matplotlib"><a href="#①-安装-matplotlib" class="headerlink" title="① 安装 matplotlib"></a>① 安装 matplotlib</h4><p><code>pip install matplotlib</code></p>
<h4 id="②-导入-matplotlib-pyplot"><a href="#②-导入-matplotlib-pyplot" class="headerlink" title="② 导入 matplotlib.pyplot"></a>② 导入 matplotlib.pyplot</h4><p><code>import matplotlib.pyplot as plt</code> 或 <code>from matplotlib import pyplot as plt</code></p>
<h4 id="③-准备数据"><a href="#③-准备数据" class="headerlink" title="③ 准备数据"></a>③ 准备数据</h4><p>准备所需的可视化数据。</p>
<h4 id="④-绘制图形"><a href="#④-绘制图形" class="headerlink" title="④ 绘制图形"></a>④ 绘制图形</h4><p>使用<code>plt</code>中的函数来绘制您想要的图形。以下是一些常见图形的绘制方法：</p>
<p><strong>线图</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y)  <span class="comment"># x和y是数据点</span></span><br></pre></td></tr></table></figure>
<p><strong>散点图</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x, y)  <span class="comment"># x和y是数据点</span></span><br></pre></td></tr></table></figure>
<p><strong>条形图</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.bar(x, y)  <span class="comment"># x是分类变量，y是对应值</span></span><br></pre></td></tr></table></figure>
<p><strong>直方图</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.hist(data, bins=<span class="number">10</span>)  <span class="comment"># data是要统计的数据，bins是分组数量</span></span><br></pre></td></tr></table></figure>
<p><strong>饼图</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(sizes, labels=labels)  <span class="comment"># sizes是各部分大小，labels是各部分标签名</span></span><br></pre></td></tr></table></figure>
<h4 id="⑤-定制图形"><a href="#⑤-定制图形" class="headerlink" title="⑤ 定制图形"></a>⑤ 定制图形</h4><p>可以添加标题、轴标签、图例以及调整轴的范围等</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plt.title(<span class="string">&quot;My Plot&quot;</span>)  <span class="comment"># 添加标题</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;X Axis&quot;</span>)  <span class="comment"># 添加X轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;Y Axis&quot;</span>)  <span class="comment"># 添加Y轴标签</span></span><br><span class="line">plt.legend()  <span class="comment"># 添加图例</span></span><br><span class="line">plt.xlim(<span class="number">0</span>, <span class="number">10</span>)  <span class="comment"># 设置X轴范围</span></span><br><span class="line">plt.ylim(<span class="number">0</span>, <span class="number">100</span>)  <span class="comment"># 设置Y轴范围</span></span><br><span class="line">plt.xticks(<span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>))  <span class="comment"># 设置X轴刻度</span></span><br><span class="line">plt.yticks(<span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>))  <span class="comment"># 设置Y轴刻度</span></span><br></pre></td></tr></table></figure>
<h4 id="⑥-显示或保存图形"><a href="#⑥-显示或保存图形" class="headerlink" title="⑥ 显示或保存图形"></a>⑥ 显示或保存图形</h4><p>最后，使用 <code>plt.show()</code> 来显示图形，或者使用 <code>plt.savefig()</code> 来保存图形到文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.show()  <span class="comment"># 显示图形</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">plt.savefig(<span class="string">&#x27;my_plot.png&#x27;</span>)  <span class="comment"># 保存图形为PNG文件</span></span><br></pre></td></tr></table></figure>
<h4 id="⑦-（可选）使用-subplots-创建多个子图"><a href="#⑦-（可选）使用-subplots-创建多个子图" class="headerlink" title="⑦ （可选）使用 subplots 创建多个子图"></a>⑦ （可选）使用 subplots 创建多个子图</h4><p>如果想在同一个窗口中显示多个图形，可以使用 <code>plt.subplots()</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>)  <span class="comment"># 创建一个2x2的子图网格，默认nrows = 1, ncols = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 整个图形的标题</span></span><br><span class="line">fig.suptitle(<span class="string">&#x27;Plot of Sine Function&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后可以在每个子图上进行绘制，例如：</span></span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].plot(x1, y1)  <span class="comment"># 在第一个子图上绘图</span></span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].scatter(x2, y2)  <span class="comment"># 在第二个子图上绘图</span></span><br><span class="line"><span class="comment"># ...以此类推</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">fig：表示整个图形窗口的对象（Figure）。</span></span><br><span class="line"><span class="string">它是你所有子图和其他绘图元素的容器。可以通过fig来设置整个图形的属性，例如标题、大小等。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">axs：表示一个包含多个子图的数组（Axes）。</span></span><br><span class="line"><span class="string">通过索引访问每个子图，例如axs[0, 0]表示第一行第一列的子图，axs[1, 1表示第二行第二列的子图。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="⑧-（可选）Pandas"><a href="#⑧-（可选）Pandas" class="headerlink" title="⑧ （可选）Pandas"></a>⑧ （可选）Pandas</h4><p><strong>Pandas</strong> 是基于 numpy 的一种工具，该工具是为解决<strong>数据分析</strong>任务而创建的，提供了大量能使我们快速便捷地<strong>处理数据的函数和方法</strong>，帮我们高效地操作大型数据集，可以通过 pandas 包读取文件中数据进行绘图。</p>
<p><strong>安装</strong> <code>pip install pandas</code></p>
<h4 id="绘图示例："><a href="#绘图示例：" class="headerlink" title="绘图示例："></a>绘图示例：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt  <span class="comment"># matplotlib.pyplot 是一个用于绘图的库，提供了一系列绘图函数。</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  <span class="comment"># numpy 是一个用于科学计算的库，特别擅长处理数组和数学运算。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">100</span>)  <span class="comment"># 生成一个包含 100 个均匀分布的数值的数组，这些数值在 0 到 10 之间。</span></span><br><span class="line">y = np.sin(x)  <span class="comment"># 计算 x 中每个值的正弦，结果存储在 y 数组中。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">plt.plot(x, y, <span class="string">&quot;-&quot;</span>, label=<span class="string">&quot;sinx&quot;</span>)  <span class="comment"># 绘制 x 和 y 之间的关系。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图表标题和坐标轴标签</span></span><br><span class="line"><span class="comment"># 慎用中文，很容易报错</span></span><br><span class="line">plt.title(<span class="string">&quot;Simple Plot of Sine Function&quot;</span>)  <span class="comment"># 设置图表的标题。</span></span><br><span class="line">plt.xlabel(<span class="string">&quot;X-axis&quot;</span>)  <span class="comment"># 设置 X 轴的标签。</span></span><br><span class="line">plt.ylabel(<span class="string">&quot;Y-axis&quot;</span>)  <span class="comment"># 设置 Y 轴的标签。</span></span><br><span class="line">plt.legend(loc=<span class="string">&quot;upper right&quot;</span>)  <span class="comment"># 图例需要搭配plt.plot()中的label标签使用。</span></span><br><span class="line"><span class="comment"># 可以使用plt.legend()函数中的loc参数修改图例的位置，upper right、lower left、center left、best等</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()  <span class="comment"># 显示图形窗口，呈现出绘制的折线图。</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302042934.png" alt=""></p>
<h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><p>matplotlib 具有高度的可定制性，在绘制复杂图形或者绘制图形不满意时，可以通过 Chatgpt 等其他语言大模型的帮助，获得更精细的控制和更理想的图形。</p>
<p>每个函数里面都有许多参数，如 loc，lizestyle，labeldistance 等，都学习的成本太高了也记不住，在后续常用图形中会捎带讲解，只需了解和会读。</p>
<h3 id="常用图形"><a href="#常用图形" class="headerlink" title="常用图形"></a>常用图形</h3><h4 id="线图（Line-Plot）"><a href="#线图（Line-Plot）" class="headerlink" title="线图（Line Plot）"></a>线图（Line Plot）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">y = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制线图</span></span><br><span class="line">plt.plot(x, y, color=<span class="string">&quot;red&quot;</span>, alpha=<span class="number">0.5</span>, linestyle=<span class="string">&quot;--&quot;</span>, linewidth=<span class="number">2</span>, marker=<span class="string">&quot;o&quot;</span>)</span><br><span class="line"><span class="comment"># color调整线条颜色，还可以用 color=&quot;#ffff00&quot; 或 color=&quot;b&quot; 这种格式</span></span><br><span class="line"><span class="comment"># alpha调整透明度，范围[0, 1]</span></span><br><span class="line"><span class="comment"># linestyle调整线条格式，即Linear Style，实线&quot;-&quot;、虚线&quot;--&quot;、点划线&quot;-.&quot;、点虚线&quot;:&quot;</span></span><br><span class="line"><span class="comment"># linewidth调整线条宽度，默认为1.5</span></span><br><span class="line"><span class="comment"># marker调整散点的形状，会在散点图一节中详细列出。</span></span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">&quot;Line Plot&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;X Axis&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Y Axis&quot;</span>)</span><br><span class="line"><span class="comment"># plt.grid(True)  # 用于显示点状网格线，有助于辅助构图</span></span><br><span class="line">plt.grid(color=<span class="string">&quot;green&quot;</span>, alpha=<span class="number">0.5</span>, linestyle=<span class="string">&quot;:&quot;</span>, linewidth=<span class="number">1</span>, axis=<span class="string">&quot;x&quot;</span>)</span><br><span class="line"><span class="comment"># axis=&quot;x&quot;表示显示x轴网格线，也可以填入x和both</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302044274.png" alt=""></p>
<h4 id="散点图-Scatter-Plot"><a href="#散点图-Scatter-Plot" class="headerlink" title="散点图 (Scatter Plot)"></a>散点图 (Scatter Plot)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">x = np.random.rand(<span class="number">50</span>)  <span class="comment"># 生成一个1x50的随机数数组，也就是50个[0, 1)的数</span></span><br><span class="line">y = np.random.rand(<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制散点图</span></span><br><span class="line">plt.scatter(x, y, marker=<span class="string">&quot;s&quot;</span>)  <span class="comment"># marker调整散点或者折线转折处的形状</span></span><br><span class="line">plt.title(<span class="string">&quot;Scatter Plot&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;X Axis&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Y Axis&quot;</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">设置值</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">设置值</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">点</td>
<td style="text-align:center">s</td>
<td style="text-align:center">实心正方形</td>
</tr>
<tr>
<td style="text-align:center">,</td>
<td style="text-align:center">像素</td>
<td style="text-align:center">p</td>
<td style="text-align:center">实心五角形</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">加号</td>
<td style="text-align:center">P</td>
<td style="text-align:center">实心加号</td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center">叉号</td>
<td style="text-align:center">X</td>
<td style="text-align:center">实心叉号</td>
</tr>
<tr>
<td style="text-align:center">d</td>
<td style="text-align:center">菱形</td>
<td style="text-align:center">D</td>
<td style="text-align:center">粗菱形</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">实心圆</td>
<td style="text-align:center">h</td>
<td style="text-align:center">竖正六边形</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">星形</td>
<td style="text-align:center">H</td>
<td style="text-align:center">横实心正六边形</td>
</tr>
<tr>
<td style="text-align:center">&#124;</td>
<td style="text-align:center">竖线</td>
<td style="text-align:center">_</td>
<td style="text-align:center">短横</td>
</tr>
<tr>
<td style="text-align:center">v</td>
<td style="text-align:center">下三角</td>
<td style="text-align:center">1</td>
<td style="text-align:center">上花三角</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">上三角</td>
<td style="text-align:center">2</td>
<td style="text-align:center">下花三角</td>
</tr>
<tr>
<td style="text-align:center">&lt;</td>
<td style="text-align:center">左三角</td>
<td style="text-align:center">3</td>
<td style="text-align:center">左花三角</td>
</tr>
<tr>
<td style="text-align:center">&gt;</td>
<td style="text-align:center">左三角</td>
<td style="text-align:center">4</td>
<td style="text-align:center">右花三角</td>
</tr>
</tbody>
</table>
</div>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302045299.png" alt=""></p>
<h4 id="条形图-Bar-Chart"><a href="#条形图-Bar-Chart" class="headerlink" title="条形图 (Bar Chart)"></a>条形图 (Bar Chart)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">categories = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">values = [random.randint(<span class="number">10</span>, <span class="number">60</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="comment"># 设置字体为支持中文的字体，比如&#x27;SimHei&#x27;（黑体），确保你的系统中安装了该字体</span></span><br><span class="line">plt.rcParams[<span class="string">&quot;font.sans-serif&quot;</span>] = [<span class="string">&quot;SimHei&quot;</span>]  <span class="comment"># 用于正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&quot;axes.unicode_minus&quot;</span>] = <span class="literal">False</span>  <span class="comment"># 用来正常显示负号</span></span><br><span class="line"><span class="comment"># 一般这两句都是一起出现的。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(categories, values):</span><br><span class="line">    plt.text(a, b + <span class="number">1</span>, b, ha=<span class="string">&quot;center&quot;</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">plt.text(x, y, s, fontsize, verticalalignment, horizontalalignment, color, **kwargs)</span></span><br><span class="line"><span class="string">        x：标签横向坐标</span></span><br><span class="line"><span class="string">        y：标签纵向坐标</span></span><br><span class="line"><span class="string">        s：标签的内容，字符串格式，</span></span><br><span class="line"><span class="string">        fontsize：标签字体大小</span></span><br><span class="line"><span class="string">        verticalalignment(va)：垂直对齐方式，可以选center、top、bottom、baseline等</span></span><br><span class="line"><span class="string">        horizontalalignment(ha)：水平对齐方式，可以选center、right、left等</span></span><br><span class="line"><span class="string">        color：注释文本内容的字体颜色</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制条形图</span></span><br><span class="line">plt.bar(categories, values, width=<span class="number">0.5</span>)</span><br><span class="line">plt.title(<span class="string">&quot;Bar Chart&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;Categories&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Values&quot;</span>)</span><br><span class="line"><span class="comment"># plt.legend(&quot;测试图例&quot;)  # 除了在bar中添加label也可直接在legend()中写图例名称</span></span><br><span class="line">plt.legend((<span class="string">&quot;测试图例&quot;</span>,)) <span class="comment"># 但是直接写的方式可能会出现显示不全，用这一行的技巧可以轻松解决</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302046441.png" alt=""></p>
<h4 id="直方图-Histogram"><a href="#直方图-Histogram" class="headerlink" title="直方图 (Histogram)"></a>直方图 (Histogram)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建正态分布的随机数据（均值为0，标准差为1）</span></span><br><span class="line">data = np.random.randn(<span class="number">100</span>)  <span class="comment"># 生成100个正态分布的随机数</span></span><br><span class="line"><span class="comment"># 函数是一个非常重要的工具，用于生成满足标准正态分布（均值为0，标准差为1）的随机数或随机数组。</span></span><br><span class="line"><span class="comment"># 这个函数在数据分析、机器学习、模拟实验等领域都有着广泛的应用。</span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将数据排序</span></span><br><span class="line">data = np.sort(data)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制直方图</span></span><br><span class="line">plt.hist(data, bins=<span class="number">20</span>, edgecolor=<span class="string">&quot;black&quot;</span>, color=<span class="string">&quot;skyblue&quot;</span>, alpha=<span class="number">0.7</span>)</span><br><span class="line"><span class="comment"># x：也就是给的data数据集，最终的直方图将对数据集进行统计</span></span><br><span class="line"><span class="comment"># bins：统计数据的区间分布，表示将数据分成 20 组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定制图形</span></span><br><span class="line">plt.title(<span class="string">&quot;Histogram of Normal Distribution&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;Value Range&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;Frequency&quot;</span>)</span><br><span class="line">plt.grid(axis=<span class="string">&quot;y&quot;</span>, linestyle=<span class="string">&quot;--&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302047588.png" alt=""></p>
<h4 id="饼图-Pie-Chart"><a href="#饼图-Pie-Chart" class="headerlink" title="饼图 (Pie Chart)"></a>饼图 (Pie Chart)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">labels = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>]</span><br><span class="line">sizes = [<span class="number">15</span>, <span class="number">30</span>, <span class="number">45</span>, <span class="number">10</span>]</span><br><span class="line"><span class="comment"># plt.figure(figsize=(8, 3), dpi=200)</span></span><br><span class="line"><span class="comment"># figure要写在所有plt之前，表示铺一张空白画布，dpi默认值为100</span></span><br><span class="line"><span class="comment"># figsize：画布大小</span></span><br><span class="line"><span class="comment"># dpi：图片分辨率</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制饼图</span></span><br><span class="line">plt.pie(sizes, labels=labels, labeldistance=<span class="number">1.08</span>, autopct=<span class="string">&quot;%1.1f%%&quot;</span>, startangle=<span class="number">90</span>)</span><br><span class="line"><span class="comment"># x：也就是括号中的sizes，表示每一块饼形图的比例</span></span><br><span class="line"><span class="comment"># labels：每一块饼图外侧显示的说明文字</span></span><br><span class="line"><span class="comment"># labeldistance：labels的显示位置，相对于半径的比例，默认值为1.1</span></span><br><span class="line"><span class="comment"># autopct：设置饼图百分比，可以用格式化字符串（在基础篇有字符串格式化详解）</span></span><br><span class="line"><span class="comment"># startangle：指定起始角度，正东方向为0度</span></span><br><span class="line"><span class="comment"># radius：饼图半径，默认值为1</span></span><br><span class="line"></span><br><span class="line">plt.axis(<span class="string">&quot;equal&quot;</span>)  <span class="comment"># 让x轴y轴相等，以保证是圆形，出现其他形状的时候写上这一行。</span></span><br><span class="line">plt.title(<span class="string">&quot;Pie Chart&quot;</span>)</span><br><span class="line">plt.legend(labels, loc=<span class="string">&quot;upper right&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202409302048366.png" alt=""></p>
<blockquote>
<p>注：还有一些图形有特定的使用场景，需要的时候再进行具体学习。</p>
<ul>
<li>直方图 2d（Hist2d Plot）</li>
<li>面积图（Area Plot）</li>
<li>热力图（Heatmap）</li>
<li>三维图形（3D Plot）</li>
<li>堆叠图（Stacked Plot)</li>
<li>等</li>
</ul>
</blockquote>
<h2 id="Python-面向对象"><a href="#Python-面向对象" class="headerlink" title="Python 面向对象"></a>Python 面向对象</h2><p><strong>面向过程：</strong>把完成某一个需求的<strong>所有步骤从头到尾逐步实现</strong>，根据开发需求，将某些功能独立的代码封装成一个又一个函数，最后完成的代码，就是<strong>顺序地调用不同的函数</strong>。</p>
<p><strong>面向对象：</strong>在完成某一个需求前，首先确定要做的事情，<strong>根据事情确定不同的对象</strong>，在对象内部封装不同的方法，最后完成的代码，就是<strong>顺序地让不同的对象调用不同的方法</strong>。</p>
<blockquote>
<p>&emsp;&emsp;注：<strong>在类内叫方法</strong>，<strong>类外叫函数</strong>，其实是差不多的东西，就相差一个<strong>self</strong>（稍后介绍）。</p>
</blockquote>
<p><strong>总结：</strong>面向过程更像是一步一步地做事，面向对象则像是把事物看作盒子，每个盒子里有自己所需的数据和功能。</p>
<p>面向对象的三大特征：<strong>封装、继承和多态</strong></p>
<h3 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><h5 id="类"><a href="#类" class="headerlink" title="类"></a>类</h5><p><strong>类</strong>是对一群具有<strong>相同特征或者行为</strong>的事务的一个<strong>统称</strong>，是抽象的，<strong>不能直接使用</strong>。</p>
<ul>
<li><p>在类中 <strong>特征</strong> 被称为 <strong>成员变量（属性）</strong></p>
</li>
<li><p>在类中 <strong>行为</strong> 被称为 <strong>成员方法</strong></p>
</li>
</ul>
<p><strong>类</strong> 就相当于制造飞机时的<strong>图纸</strong>，是一个<strong>模板</strong>，是<strong>负责创建对象的</strong>。</p>
<p><strong>类名</strong>的命名规则需要满足<strong>大驼峰命名法</strong>，例 <code>MyClass</code></p>
<ol>
<li><p>每一个单词的首字母大写</p>
</li>
<li><p>单词与单词之间没有下划线</p>
</li>
</ol>
<h5 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h5><p><strong>对象</strong>是<strong>由类创建出来的一个具体存在</strong>，可以直接使用</p>
<p>由<strong>哪一个类</strong>创建出来的<strong>对象</strong>，就拥有在<strong>哪一个类</strong>中定义的：<strong>属性和方法</strong></p>
<p>用<strong>类实例化一个对象</strong>就相当于根据<strong>某张图纸制造一架飞机</strong>。</p>
<p>一张图纸可以造出许多架飞机，同理，<strong>一个类也能实例化出多个对象</strong>。</p>
<p><strong>语法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410021806136.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    name = <span class="literal">None</span>  <span class="comment"># 成员变量（属性）</span></span><br><span class="line">    age = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say_hi</span>(<span class="params">self, msg</span>):  <span class="comment"># 成员方法，第一个参数永远是self</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;旅行者你好！我的名字叫<span class="subst">&#123;self.name&#125;</span>，今年<span class="subst">&#123;self.age&#125;</span>岁，是蒙德城连续三年的「飞行冠军」！\n<span class="subst">&#123;msg&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">stu_1 = Student()</span><br><span class="line">stu_1.name = <span class="string">&quot;安柏&quot;</span></span><br><span class="line">stu_1.age = <span class="number">16</span></span><br><span class="line">stu_1.say_hi(<span class="string">&quot;欢迎来到蒙德城！&quot;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>在 <strong>类的外部</strong>，通过 <code>变量名.</code> 访问对象的 <strong>属性和方法</strong></li>
<li>在 <strong>类封装的方法中</strong>，通过 <code>self.</code> 访问对象的 <strong>属性和方法</strong></li>
</ul>
</blockquote>
<h4 id="魔术方法"><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h4><p>在 Python 中，魔术方法(magic methods)，是指以双下划线开头和结尾的特殊方法。</p>
<p><strong>总览</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">方法</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">__init__</td>
<td style="text-align:center">构造方法，可用于创建类对象的时候设置初始化行为</td>
</tr>
<tr>
<td style="text-align:center">__str__</td>
<td style="text-align:center">用于实现类对象转字符串的行为</td>
</tr>
<tr>
<td style="text-align:center">__lt__</td>
<td style="text-align:center">用于 2 个类对象进行小于或大于比较</td>
</tr>
<tr>
<td style="text-align:center">__le__</td>
<td style="text-align:center">用于 2 个类对象进行小于等于或大于等于比较</td>
</tr>
<tr>
<td style="text-align:center">__eq__</td>
<td style="text-align:center">用于 2 个类对象进行相等比较</td>
</tr>
</tbody>
</table>
</div>
<h5 id="init-构造方法"><a href="#init-构造方法" class="headerlink" title="__init__ (构造方法)"></a>__init__ (构造方法)</h5><p>作用：为对象的属性<strong>设置初始值</strong>，该方法在创建对象时会被自动调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    name = <span class="literal">None</span></span><br><span class="line">    age = <span class="literal">None</span></span><br><span class="line">    tel = <span class="literal">None</span>  <span class="comment"># 这三行可以省略</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, tel</span>): <span class="comment"># 构造方法也是方法，所有不能漏掉 self</span></span><br><span class="line">        self.name = name  <span class="comment"># 这一行会自动为对象stu生成一个name属性，并将传入的参数值赋给它。</span></span><br><span class="line">        self.age = age  <span class="comment"># 因此，不需要在类体中先定义 name = None等</span></span><br><span class="line">        self.tel = tel</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Student类创建了一个类对象&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu = Student(<span class="string">&quot;迪卢克&quot;</span>, <span class="number">25</span>, <span class="string">&quot;12367896789&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(stu.name, stu.age, stu.tel)</span><br></pre></td></tr></table></figure>
<p><strong>构造方法和手动赋值的区别：</strong></p>
<ul>
<li><p>对象在创建时就保证了必要的属性被赋值，避免对象处于不完整或错误的状态。</p>
</li>
<li><p>代码简洁，不需要额外的赋值步骤。</p>
</li>
<li><p>可以封装复杂的初始化逻辑，避免手动赋值时遗漏或导致错误。</p>
</li>
<li><p>增强了属性的一致性和对象的不可变性，防止成员变量被随意修改。</p>
</li>
</ul>
<p>有了构造方法后，每次实例化 <code>Student</code> 类时，你必须传递 <code>name</code>、<code>age</code> 和 <code>tel</code> 这三个参数，如果你想在实例化时可以不传递参数，有几种常见的做法：</p>
<p><strong>1. 为参数设置默认值</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name=<span class="string">&quot;旅行者&quot;</span>, age=<span class="number">17</span>, tel=<span class="string">&quot;12356785678&quot;</span></span>):  <span class="comment"># 这里也要遵守缺省函数的规则</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.tel = tel</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Student类创建了一个类对象&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu = Student()</span><br><span class="line"><span class="built_in">print</span>(stu.name, stu.age, stu.tel)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;<strong>缺省函数</strong>规则： 一旦某个键设了默认值，那么从这个键往后的键都必须设置默认参数。</p>
</blockquote>
<p><strong>2.</strong> <strong>使用可变参数 </strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):</span><br><span class="line">        self.name = kwargs.get(<span class="string">&quot;name&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        self.age = kwargs.get(<span class="string">&quot;age&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        self.tel = kwargs.get(<span class="string">&quot;tel&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Student类创建了一个类对象&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu = Student(name=<span class="string">&quot;凯亚&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(stu.name, stu.age, stu.tel)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;<strong><code>kwargs</code></strong>：是一个可变长度的关键字参数字典，包含传递给函数的所有关键字参数。在函数调用时，所有以 <code>key=value</code> 形式传递的参数会存储在这个字典中。</p>
<p>&emsp;<strong><code>get(&quot;name&quot;, None)</code></strong>：<code>get()</code> 是 Python 字典类型的一个方法。它的作用是：</p>
<ul>
<li>从字典中获取指定键 <code>&quot;name&quot;</code> 的值。</li>
<li>如果键 <code>&quot;name&quot;</code> 存在，就返回对应的值。</li>
<li>如果键 <code>&quot;name&quot;</code> 不存在，则返回你指定的默认值，这里是 <code>None</code>。</li>
</ul>
</blockquote>
<h5 id="str"><a href="#str" class="headerlink" title="__str__"></a>__str__</h5><p>默认情况下，直接<strong>打印实例化对象</strong>会输出这个变量所引用的对象是由<strong>哪一个类创建的对象，以及在内存中的地址</strong>，用 <code>__str__</code> 这个内置方法能够打印 <strong>自定义的内容</strong>。</p>
<h5 id="del"><a href="#del" class="headerlink" title="__del__"></a>__del__</h5><p>在<strong>创建对象</strong>时，会给对象<strong>分配一片空间存储</strong>，接着会自动调用 <code>__init__</code> 方法进行构造，那如果想<strong>删除一个对象</strong>，我们可以使用<strong><code>del</code>关键字</strong>，语法：<code>del 对象名</code></p>
<blockquote>
<p>&emsp;&emsp;注意：此时我们删除掉的是从命名空间中对删除对象的引用，而不是直接删除对象本身，如果还有其他引用指向该对象，则对象不会被删除，直到所有引用都被删除，对象才会真正被删除。</p>
</blockquote>
<p>如果我们在类中创建了<code>__del__</code> 方法，那么销毁的时候会自动调用<code>__del__</code> 方法，所以如果希望在对象被销毁前，再做一些事情，<strong>比如关闭文件、释放网络连接等</strong>，可以使用 <code>__del__</code> 方法。</p>
<p><strong>生命周期</strong></p>
<ul>
<li>一个对象从调用 <code>类名()</code> 创建，生命周期开始</li>
<li>一个对象的 <code>__del__</code> 方法一旦被调用，生命周期结束</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;炼金术施展成功！<span class="subst">&#123;self.name&#125;</span>已成功被初始化~&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment"># __str__魔术方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 如果不写__str__方法，直接打印实例化对象，只会打印出对象的地址。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Student类对象，name:<span class="subst">&#123;self.name&#125;</span>, age:<span class="subst">&#123;self.age&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># __del__魔术方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;啊！我<span class="subst">&#123;self.name&#125;</span>要被销毁了~&quot;</span>)</span><br><span class="line">    <span class="comment"># 销毁前可以再做一些事，它的主要功能是用于资源回收，比如关闭文件、释放网络连接等。</span></span><br><span class="line">    <span class="comment"># 通过实现__del__方法，可以确保在对象生命周期结束时，自动执行一些清理工作，避免资源泄露。</span></span><br><span class="line"></span><br><span class="line">stu = Student(<span class="string">&quot;阿贝多&quot;</span>, <span class="number">24</span>)</span><br><span class="line"><span class="built_in">print</span>(stu)</span><br><span class="line"><span class="keyword">del</span> stu</span><br><span class="line"><span class="comment"># print(stu)  # 无法再次输出。</span></span><br></pre></td></tr></table></figure>
<h5 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h5><p><strong>运算符重载</strong>‌ 是指赋予基本运算符新的运算功能，使其能够应用于自定义类型的运算。</p>
<p><strong>总览</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">魔法方法</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">__add__(self, other)</td>
<td style="text-align:center">加法运算 +</td>
</tr>
<tr>
<td style="text-align:center">__sub__(self, other)</td>
<td style="text-align:center">减法运算 -</td>
</tr>
<tr>
<td style="text-align:center">__mul__(self, other)</td>
<td style="text-align:center">乘法运算 *</td>
</tr>
<tr>
<td style="text-align:center">__floordiv__(self, other)</td>
<td style="text-align:center">浮点除法运算 //</td>
</tr>
<tr>
<td style="text-align:center">__mod__(self, other)</td>
<td style="text-align:center">取余运算 %</td>
</tr>
<tr>
<td style="text-align:center">__pow__(self, other[, module]))</td>
<td style="text-align:center">指数运算 **</td>
</tr>
<tr>
<td style="text-align:center">__and__(self, other)</td>
<td style="text-align:center">按位与运算 &amp;</td>
</tr>
<tr>
<td style="text-align:center">__xor__(self, other)</td>
<td style="text-align:center">按位异或运算 ^</td>
</tr>
<tr>
<td style="text-align:center">__or__(self, other)</td>
<td style="text-align:center">按位或运算 &#124;</td>
</tr>
<tr>
<td style="text-align:center">__lt__(self, other)</td>
<td style="text-align:center">比较操作符 &lt;</td>
</tr>
<tr>
<td style="text-align:center">__gt__(self, other)</td>
<td style="text-align:center">比较操作符 &gt;</td>
</tr>
<tr>
<td style="text-align:center">__le__(self, other)</td>
<td style="text-align:center">比较操作符 &lt;=</td>
</tr>
<tr>
<td style="text-align:center">__ge__(self, other)</td>
<td style="text-align:center">比较操作符 &gt;=</td>
</tr>
<tr>
<td style="text-align:center">__eq__(self, other)</td>
<td style="text-align:center">比较操作符 ==</td>
</tr>
<tr>
<td style="text-align:center">__ne__(self, other)</td>
<td style="text-align:center">比较操作符 !=</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="comment"># __lt__魔术方法  # less than</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age &lt; other.age</span><br><span class="line"></span><br><span class="line">    <span class="comment"># __le__魔术方法  # less equal</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__le__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age &lt;= other.age</span><br><span class="line"></span><br><span class="line">    <span class="comment"># __eq__魔术方法  # equal</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age == other.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu1 = Student(<span class="string">&quot;神里绫华&quot;</span>, <span class="number">19</span>)</span><br><span class="line">stu2 = Student(<span class="string">&quot;神里绫人&quot;</span>, <span class="number">23</span>)</span><br><span class="line"><span class="built_in">print</span>(stu1)</span><br><span class="line"><span class="built_in">print</span>(stu1 == stu2)</span><br></pre></td></tr></table></figure>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410041655755.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410041724544.png" alt=""></p>
<p><strong>封装</strong>是将对象的变量（属性）和行为（方法）打包在一起，<strong>隐藏对象的内部</strong>实现细节，只提供<strong>公开的接口（或方法）与外部交互</strong>。</p>
<p><strong>好处：</strong></p>
<ul>
<li><p><strong>隐藏实现细节</strong>，提供清晰的对外接口，<strong>减少错误</strong>，<strong>易于代码维护</strong>。</p>
</li>
<li><p>可以对内部属性进行验证，保证<strong>数据的一致性和准确性</strong>。</p>
</li>
<li><p>封装提高了代码的<strong>内聚性</strong>，<strong>易于模块化和重用</strong>。</p>
</li>
</ul>
<p><strong>两步走：</strong></p>
<ul>
<li><p>将 <strong>属性</strong> 和 <strong>方法 封装</strong>到一个抽象的 <strong>类</strong> 中</p>
</li>
<li><p><strong>在类外</strong> 使用 <strong>类</strong> 创建 <strong>对象</strong>，然后<strong>让对象调用方法</strong></p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Gun</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model</span>):</span><br><span class="line">        <span class="comment"># 枪的型号</span></span><br><span class="line">        self.model = model</span><br><span class="line">        <span class="comment"># 子弹数量</span></span><br><span class="line">        self.bullet_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_bullet</span>(<span class="params">self, count</span>):</span><br><span class="line">        self.bullet_count += count</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">shoot</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 判断是否还有子弹</span></span><br><span class="line">        <span class="keyword">if</span> self.bullet_count &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;没有子弹了...&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 发射一颗子弹</span></span><br><span class="line">        self.bullet_count -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.model&#125;</span>发射子弹~ [还剩<span class="subst">&#123;self.bullet_count&#125;</span>颗]...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Soldier</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 姓名</span></span><br><span class="line">        self.name = name</span><br><span class="line">        <span class="comment"># 枪，士兵初始没有枪 None 关键字表示什么都没有</span></span><br><span class="line">        self.gun = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fire</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 1. 判断士兵是否有枪</span></span><br><span class="line">        <span class="keyword">if</span> self.gun <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>还没有枪~&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 2. 高喊口号</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;冲啊<span class="subst">&#123;self.name&#125;</span>!&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 3. 让枪装填子弹</span></span><br><span class="line">        self.gun.add_bullet(<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 4. 让枪循环发射子弹</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">            self.gun.shoot()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个枪对象进行测试</span></span><br><span class="line">ak47 = Gun(<span class="string">&quot;ak47&quot;</span>)</span><br><span class="line">ak47.add_bullet(<span class="number">50</span>)</span><br><span class="line">ak47.shoot()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-------------------&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个士兵对象</span></span><br><span class="line">xu3duo = Soldier(<span class="string">&quot;xu3duo&quot;</span>)</span><br><span class="line">xu3duo.gun = Gun(<span class="string">&quot;M416&quot;</span>)</span><br><span class="line"><span class="comment"># Python的数据类型是灵活可变的，这里就把Gun类看成一种数据类型传给变量gun，好似int型、str型等</span></span><br><span class="line">xu3duo.fire()</span><br></pre></td></tr></table></figure>
<h4 id="私有成员"><a href="#私有成员" class="headerlink" title="私有成员"></a>私有成员</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410041757633.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Girl</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.__age = <span class="number">18</span></span><br><span class="line">        self.__weight = <span class="number">125</span></span><br><span class="line">        <span class="comment"># 科普：在C和Java中，都是用private、public和protected三个关键字。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__weight</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>的体重是<span class="subst">&#123;self.__weight&#125;</span>kg。&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">scales</span>(<span class="params">self</span>):  <span class="comment"># 哈哈，我是体重秤</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>的年龄是<span class="subst">&#123;self.__age&#125;</span>，体重是<span class="subst">&#123;self.__weight&#125;</span>kg。&quot;</span>)</span><br><span class="line">        <span class="comment"># 不管对外有多私有，在类内都是可以直接访问的，相当于这个对象本人肯定是知道自己的属性的。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">girl = Girl(<span class="string">&quot;小菲&quot;</span>)</span><br><span class="line"><span class="comment"># 私有属性，外部不能直接访问</span></span><br><span class="line"><span class="built_in">print</span>(girl.name)  <span class="comment"># 小菲</span></span><br><span class="line"><span class="comment"># print(girl.__age)  # 属性错误 AttributeError: &#x27;Girl&#x27; object has no attribute &#x27;__age&#x27;</span></span><br><span class="line"></span><br><span class="line">girl.__age = <span class="number">17</span></span><br><span class="line"><span class="built_in">print</span>(girl.__age)  <span class="comment"># 17</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Q：当我们尝试给私有变量赋值的时候，会发现不报错，打印时，输出也会正常输出，这是为什么呢？</span></span><br><span class="line"><span class="string">    A：当你在外部执行 girl.__age = 17 时，Python并没有修改类中原来的 self.__age，</span></span><br><span class="line"><span class="string">    而是给对象 girl 添加了一个新的公共属性 __age，与原本私有的 __age 并无关系。</span></span><br><span class="line"><span class="string">    这就是为什么你可以通过 print(girl.__age) 输出结果。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(girl._Girl__age)  <span class="comment"># 18</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    在Python中，并没有真正意义的私有，私有属性和方法在内部会被 Python 自动改名为 _ClassName__attribute 的形式，</span></span><br><span class="line"><span class="string">    以避免外部直接访问。例如，在 Girl 类中，self.__age 实际上会被改写为 self._Girl__age。</span></span><br><span class="line"><span class="string">    所以我们可以通过 print(girl._Girl__age) 正常打印出我们在类内的赋值 18，</span></span><br><span class="line"><span class="string">    但是，在日常开发中，不要使用这种方式，访问对象的 私有属性 或 私有方法。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 私有方法，外部不能直接调用</span></span><br><span class="line"><span class="comment"># girl.__weight()  # AttributeError: &#x27;Girl&#x27; object has no attribute &#x27;__weight&#x27;</span></span><br><span class="line">girl.scales()  <span class="comment"># 小菲的年龄是18，体重是125kg。</span></span><br></pre></td></tr></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p><strong>引例</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051448677.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051453526.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051525306.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">iPhone6</span>:</span><br><span class="line">    IMEI = <span class="literal">None</span>  <span class="comment"># 序列号</span></span><br><span class="line">    producer = <span class="literal">None</span>  <span class="comment"># 厂商</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_by_3g</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;3g通话&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">iPhone16ProMax</span>(<span class="title class_ inherited__">iPhone6</span>):</span><br><span class="line">    face_id = <span class="literal">True</span>  <span class="comment"># 面部识别</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call_by_5g</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;2024最新款&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">i16pm = iPhone16ProMax()</span><br><span class="line">i16pm.IMEI = <span class="string">&quot;10001&quot;</span></span><br><span class="line">i16pm.producer = <span class="string">&quot;华强北&quot;</span></span><br><span class="line"><span class="built_in">print</span>(i16pm.IMEI)</span><br><span class="line"><span class="built_in">print</span>(i16pm.producer)</span><br><span class="line"><span class="built_in">print</span>(i16pm.face_id)</span><br><span class="line">i16pm.call_by_3g()</span><br><span class="line">i16pm.call_by_5g()</span><br></pre></td></tr></table></figure>
<h4 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h4><p>继承是指在一个类中<strong>可以使用另一个类</strong>中，<strong>已有的成员变量和成员方法</strong>，这样可以<strong>减少代码的重复性</strong>，<strong>方便代码的维护和更新</strong>。</p>
<blockquote>
<p>&emsp;&emsp;我们称继承类为<strong>派生类或子类（Derived class、Subclass）</strong>，被继承的类称为<strong>基类、父类或超类</strong>（Base class、Parent class、Super class）</p>
<p>&emsp;&emsp;子类可以继承父类所有的成员变量和成员方法，私有成员同样被继承，可以通过 _ClassName__attribute 的形式访问，但是不建议，所以我们<strong>默认子类继承了父类中的公共成员变量和公共成员方法，即非私有成员</strong>。</p>
</blockquote>
<h4 id="单继承"><a href="#单继承" class="headerlink" title="单继承"></a>单继承</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;eat&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;drink&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sleep</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;sleep&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;run&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">bark</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;bark&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">meow</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;meow&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dog = Dog(<span class="string">&quot;Dundun&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;My name is <span class="subst">&#123;dog.name&#125;</span>, I can <span class="subst">&#123;dog.eat()&#125;</span>、<span class="subst">&#123;dog.drink()&#125;</span>、<span class="subst">&#123;dog.sleep()&#125;</span>、<span class="subst">&#123;dog.run()&#125;</span> and <span class="subst">&#123;dog.bark()&#125;</span>.&quot;</span>)</span><br><span class="line"></span><br><span class="line">cat = Cat(<span class="string">&quot;Mimi&quot;</span>)</span><br><span class="line">actions = <span class="string">f&quot;<span class="subst">&#123;cat.eat()&#125;</span>、<span class="subst">&#123;cat.drink()&#125;</span>、<span class="subst">&#123;cat.sleep()&#125;</span>、<span class="subst">&#123;cat.run()&#125;</span> and <span class="subst">&#123;cat.meow()&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;My name is <span class="subst">&#123;cat.name&#125;</span>, I also can <span class="subst">&#123;actions&#125;</span>.&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="传递性"><a href="#传递性" class="headerlink" title="传递性"></a>传递性</h4><p><strong>子类</strong> 拥有 <strong>父类</strong> 以及 <strong>父类的父类</strong> 中封装的所有 <strong>属性</strong> 和 <strong>方法</strong>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;eat&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;drink&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sleep</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;sleep&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;run&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">bark</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;bark&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Xiaotiandog</span>(<span class="title class_ inherited__">Dog</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fly</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;fly&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">xtd = Xiaotiandog(<span class="string">&quot;白犬神嗷&quot;</span>)</span><br><span class="line">actions = <span class="string">f&quot;<span class="subst">&#123;xtd.eat()&#125;</span>、<span class="subst">&#123;xtd.drink()&#125;</span>、<span class="subst">&#123;xtd.sleep()&#125;</span>、<span class="subst">&#123;xtd.run()&#125;</span> and <span class="subst">&#123;xtd.bark()&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;My name is <span class="subst">&#123;xtd.name&#125;</span>, not Only Can I <span class="subst">&#123;actions&#125;</span>, but I can also <span class="subst">&#123;xtd.fly()&#125;</span>!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h4><p><strong>子类</strong> 可以拥有 <strong>多个父类</strong>，并且具有 <strong>所有父类</strong> 的 <strong>属性</strong> 和 <strong>方法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051621415.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;eat&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;drink&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sleep</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;sleep&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;run&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">cattle</span>(<span class="title class_ inherited__">Animal</span>):  <span class="comment"># 牛</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">moo</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;哞哞&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">horse</span>(<span class="title class_ inherited__">Animal</span>):  <span class="comment"># 马</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">neigh</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;嘶嘶&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Niuma</span>(cattle, horse):  <span class="comment"># 牛马</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ok</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;收到！&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">nm = Niuma(<span class="string">&quot;牛马&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;牛会哞马会叫，牛马会收到！&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(nm.moo())  <span class="comment"># 小牛马 可以使用 牛 的成员方法 moo</span></span><br><span class="line"><span class="built_in">print</span>(nm.neigh())  <span class="comment"># 小牛马 可以使用 马 的成员方法 neigh</span></span><br><span class="line"><span class="built_in">print</span>(nm.ok())  <span class="comment"># 当然了，如果小牛马的父类还有成员变量，也可以照用无误</span></span><br></pre></td></tr></table></figure>
<p><strong>多个父类</strong>中，如果有同名的成员，那么默认以继承顺序<strong>（从左到右）</strong>为<strong>优先级</strong>。</p>
<p>即：先继承的保留，后继承的被覆盖</p>
<blockquote>
<p>&emsp;&emsp;提示：在开发中，如果 <strong>父类之间</strong> 存在 <strong>同名的属性或者方法</strong>，应该 <strong>尽量避免</strong> 使用多继承。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;B&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;C&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class D(C, B):</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>(B, C):  <span class="comment"># 如果有同名成员，先继承谁，就会保谁的内容</span></span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># pass是占位语句，用来保证函数（方法）或类定义的完整性，表示无内容，空的意思</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Q：class D(A, B, C)或者 class D(A, C, B)的写法是不被允许的，这是为什么?</span></span><br><span class="line"><span class="string">    A：Python 的多重继承中，类的继承顺序要遵守 MRO（Method Resolution Order方法解析顺序）的规则，</span></span><br><span class="line"><span class="string">    MRO使用C3线性化算法，C3算法的核心是merge()函数，这个函数的功能是遍历继承的父类，将每个父类看成一个序列，</span></span><br><span class="line"><span class="string">    如果一个序列的第一个元素，是其他序列中的第一个元素，或不在其他序列出现，就将其排到新列表中，</span></span><br><span class="line"><span class="string">    以这个class D(A, B, C)为例，我们有，序列1 [A]、序列2 [B, A](因为B继承了A)、序列3 [C, A]。</span></span><br><span class="line"><span class="string">    新列表中第一个应该是本身D，接着应该先放入B，因为A在其他序列出现，且不是在其他序列的第一个，其次放入C，最后放入A,</span></span><br><span class="line"><span class="string">    但是现在class D(A, B, C)排在第一个的A类，并不能符合MRO的规则，产生了冲突，所以就报错了。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">d = D()</span><br><span class="line">d.show()</span><br><span class="line"><span class="built_in">print</span>(D.__mro__)</span><br><span class="line"><span class="comment"># (&lt;class &#x27;__main__.D&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>__mro__</strong></p>
<ul>
<li>在搜索方法时，是按照 <code>__mro__</code> 的输出结果 <strong>从左至右</strong> 的顺序查找的，其中<code>object</code> 是 <code>Python</code> <em>为所有对象提供的</em> <strong>基类</strong></li>
<li>如果在当前类中 <strong>找到方法，就直接执行，不再搜索</strong></li>
<li>如果 <strong>没有找到，就查找下一个类</strong> 中是否有对应的方法，<strong>如果找到，就直接执行，不再搜索</strong></li>
<li>如果找到最后一个类，还没有找到方法，程序报错</li>
</ul>
<p>所以，慎用多继承。</p>
</blockquote>
<h4 id="复写（重写）"><a href="#复写（重写）" class="headerlink" title="复写（重写）"></a>复写（重写）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051746558.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410051746941.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="built_in">id</span> = <span class="string">&quot;Animal&quot;</span></span><br><span class="line">    use_tools = <span class="literal">False</span></span><br><span class="line">    breathe = <span class="literal">True</span></span><br><span class="line">    feel_world = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;吃东西&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;山泉水&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rabbit</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="built_in">id</span> = <span class="string">&quot;Rabbit&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;吃胡萝卜&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drink</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;我要喝魔法兔子水，我的父类会喝<span class="subst">&#123;<span class="built_in">super</span>().drink()&#125;</span>。&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;我要喝魔法兔子水，我的父类会喝<span class="subst">&#123;Animal.drink(self)&#125;</span>。&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="built_in">id</span> = <span class="string">&quot;Person&quot;</span></span><br><span class="line">    use_tools = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;吃预制菜&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">id_show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;我的身份是 <span class="subst">&#123;self.<span class="built_in">id</span>&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;我的父类是 <span class="subst">&#123;<span class="built_in">super</span>().<span class="built_in">id</span>&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;我的父类是 <span class="subst">&#123;Animal.<span class="built_in">id</span>&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r = Rabbit()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;兔子<span class="subst">&#123;r.eat()&#125;</span>，会感受世界：<span class="subst">&#123;r.feel_world&#125;</span>，还会使用工具：<span class="subst">&#123;r.use_tools&#125;</span>&quot;</span>)</span><br><span class="line">r.drink()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;----------------------------------------------&quot;</span>)</span><br><span class="line">p = Person()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;人会<span class="subst">&#123;p.eat()&#125;</span>，会感受世界：<span class="subst">&#123;p.feel_world&#125;</span>，还会使用工具：<span class="subst">&#123;p.use_tools&#125;</span>&quot;</span>)</span><br><span class="line">p.id_show()</span><br></pre></td></tr></table></figure>
<h3 id="类型注解"><a href="#类型注解" class="headerlink" title="类型注解"></a>类型注解</h3><h4 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h4><p>类型注解（Type Annotations）是 Python 的一种语法，用于<strong>在代码中标注变量、函数参数和返回值的类型</strong>。这可以帮助开发者理解代码的意图，并且在一些开发工具和静态分析工具中<strong>提高代码的可读性和可维护性</strong>。类型注解在 Python 3.5 引入，并在 Python 3.6 之后得到了进一步的完善。</p>
<h4 id="变量注解"><a href="#变量注解" class="headerlink" title="变量注解"></a>变量注解</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410082104485.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410082105887.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">var_1 = random.randint(<span class="number">1</span>, <span class="number">10</span>)  <span class="comment"># type: <span class="built_in">int</span></span></span><br><span class="line">var_2 = json.loads(<span class="string">&#x27;&#123;&quot;name&quot;: &quot;LittleSugar&quot;&#125;&#x27;</span>)  <span class="comment"># type: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">str</span>]</span></span><br><span class="line"><span class="comment"># JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，后续会详解。</span></span><br><span class="line"><span class="comment"># 通过json.loads(data)方法把json数据转化为了python数据，析出了dict字典类型。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">var_3 = func()  <span class="comment"># type: <span class="built_in">int</span></span></span><br><span class="line"></span><br><span class="line">var_4: <span class="built_in">int</span> = <span class="string">&quot;SpiderMan&quot;</span></span><br><span class="line">var_5: <span class="built_in">str</span> = <span class="number">123</span></span><br><span class="line"><span class="built_in">print</span>(var_4, var_5)</span><br><span class="line"><span class="comment"># 即使标注错了，也不影响程序正确运行</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>&emsp;&emsp;注意：一般在<strong>无法直接看出变量类型</strong>的时候，才会添加变量的类型<strong>注解</strong>，那种一眼就能看出来的显式类型一般都不用标注。</p>
<p>&emsp;&emsp;快捷键：把光标移到括号内，按 <strong>Ctrl + P</strong> 查看注解提示</p>
</blockquote>
<h4 id="函数注解"><a href="#函数注解" class="headerlink" title="函数注解"></a>函数注解</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410082210135.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410082210653.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对形参进行类型注解</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x: <span class="built_in">int</span>, y: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line">a = add(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;dd&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对返回值进行类型注解</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data: <span class="built_in">list</span></span>) -&gt; <span class="built_in">list</span>:</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">my_list = func([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])</span><br><span class="line">my_list.append(<span class="string">&quot;c&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(my_list)</span><br></pre></td></tr></table></figure>
<h4 id="Union-联合类型注解"><a href="#Union-联合类型注解" class="headerlink" title="Union 联合类型注解"></a>Union 联合类型注解</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410082249042.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Union</span></span><br><span class="line"></span><br><span class="line">my_list: <span class="built_in">list</span>[<span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>]] = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;itmimi&quot;</span>, <span class="string">&quot;itcat&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data: <span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>, <span class="built_in">list</span>]</span>) -&gt; <span class="type">Union</span>[<span class="built_in">int</span>, <span class="built_in">str</span>, <span class="built_in">list</span>]:</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">type</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func(my_list))</span><br></pre></td></tr></table></figure>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><h4 id="定义-4"><a href="#定义-4" class="headerlink" title="定义"></a>定义</h4><p>多态是指在不同的类中实现相同的方法，而方法的行为会根据对象的类型不同而有所不同。它强调的是<strong>同一个接口，不同的实现</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091309068.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;汪汪汪&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;喵喵喵&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_sound</span>(<span class="params">animal: Animal</span>):  <span class="comment"># 需要传入Animal类或者其子类的对象</span></span><br><span class="line">    animal.speak()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化两个子对象</span></span><br><span class="line">dog = Dog()</span><br><span class="line">cat = Cat()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将对象传入函数，因为Dog和Cat都继承了Animal，</span></span><br><span class="line"><span class="comment"># 所以Animal拥有的成员内容，子类也有，所以传入子类对象也是没问题的</span></span><br><span class="line">make_sound(dog)</span><br><span class="line">make_sound(cat)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091319970.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091326725.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091331056.png" alt=""></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 演示抽象类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AC</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;制冷&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;制热&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;左右摆风&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MideaAC</span>(<span class="title class_ inherited__">AC</span>):  <span class="comment"># 命名类名最好符合大驼峰命名方式，即MyClass这种形式</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调制冷&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调制热&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;美的空调左右摆风&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GreeAC</span>(<span class="title class_ inherited__">AC</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">cool_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调制冷&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hot_wind</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调制热&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swing_l_r</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;格力空调左右摆风&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">use_ac</span>(<span class="params">ac: AC</span>):</span><br><span class="line">    ac.cool_wind()</span><br><span class="line">    ac.swing_l_r()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">midea_ac = MideaAC()</span><br><span class="line">gree_ac = GreeAC()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">use_ac(midea_ac)</span><br><span class="line">use_ac(gree_ac)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>区别</strong>：</p>
<ul>
<li><strong>多态</strong> 关注的是不同类之间，通过相同接口表现不同的行为，在 Python 中常通过继承和复写来实现动态多态。</li>
<li><strong>复写</strong> 是子类重写父类的方法，改变父类已有的行为，子类可以通过 <code>super()</code> 来调用父类的版本，复写是实现多态的一种方式。</li>
</ul>
<p>&emsp;简言之，<strong>复写是实现多态的手段之一</strong>，而多态是一种通过接口统一实现不同行为的能力。</p>
</blockquote>
<h2 id="Python-数据分析案例"><a href="#Python-数据分析案例" class="headerlink" title="Python 数据分析案例"></a>Python 数据分析案例</h2><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p><strong>JSON</strong>（JavaScript Object Notation，JavaScript 对象表示法）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091745504.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091746743.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091746824.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410091746949.png" alt=""></p>
<blockquote>
<p>&emsp;&emsp;<strong>优点：</strong></p>
<p>&emsp;&emsp;Python 语言使用 JSON 有很大优势，因为：JSON 无非就是<strong>一个单独的字典或一个内部元素都是字典的列表</strong></p>
<p>&emsp;&emsp;所以 <strong>JSON</strong> 可以直接和 <strong>Python 的字典或列表</strong> 进行无缝转换。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备列表，列表内每一个元素都是字典，将其转换为JSON</span></span><br><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;张大山&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">11</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;王大锤&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">13</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;赵小虎&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">16</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">json_str = json.dumps(data, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    当 ensure_ascii 设置为 True（默认值）时，输出会确保将所有输入的非ASCII字符转义。</span></span><br><span class="line"><span class="string">    换句话说，它会将所有无法用ASCII表示的字符转换成对应的Unicode编码。</span></span><br><span class="line"><span class="string">    这样，经过 dumps 后的字符串中，汉字会变成以 \u 开头的Unicode编码.</span></span><br><span class="line"><span class="string">    当 ensure_ascii 设置为 False 时，这些字符会原样输出。</span></span><br><span class="line"><span class="string">    这意味着，如果你的数据中包含汉字，你应该设置 ensure_ascii=False，以便保留汉字而不是转义成Unicode编码。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_str))</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备字典，将字典转换为JSON</span></span><br><span class="line">d = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;周杰伦&quot;</span>, <span class="string">&quot;addr&quot;</span>: <span class="string">&quot;台北&quot;</span>&#125;</span><br><span class="line">json_str = json.dumps(d, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_str))</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将JSON字符串转换为Python数据类型[&#123;k: v, k: v&#125;, &#123;k: v, k: v&#125;]</span></span><br><span class="line">s = <span class="string">&#x27;[&#123;&quot;name&quot;: &quot;张大山&quot;, &quot;age&quot;: 11&#125;, &#123;&quot;name&quot;: &quot;王大锤&quot;, &quot;age&quot;: 13&#125;, &#123;&quot;name&quot;: &quot;赵小虎&quot;, &quot;age&quot;: 16&#125;]&#x27;</span></span><br><span class="line">l = json.loads(s)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(l))</span><br><span class="line"><span class="built_in">print</span>(l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将JSON字符串转换为Python数据类型&#123;k: v, k: v&#125;</span></span><br><span class="line">s = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;周杰伦&quot;, &quot;addr&quot;: &quot;台北&quot;&#125;&#x27;</span></span><br><span class="line">d = json.loads(s)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(d))</span><br><span class="line"><span class="built_in">print</span>(d)</span><br></pre></td></tr></table></figure>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><h4 id="data-define-py"><a href="#data-define-py" class="headerlink" title="data_define.py"></a>data_define.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">定义和数据相关的类</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Record</span>:  <span class="comment"># 记录类，表示一条条的记录</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, date, order_id, money, province</span>):</span><br><span class="line">        self.date = date  <span class="comment"># 订单日期</span></span><br><span class="line">        self.order_id = order_id  <span class="comment"># 订单ID</span></span><br><span class="line">        self.money = money  <span class="comment"># 订单金额</span></span><br><span class="line">        self.province = province  <span class="comment"># 销售省份</span></span><br><span class="line">        <span class="comment"># 鼠标中键往下拖可以一下子选多行，就像植物大战僵尸里『你看,他们像柱子一样』那一关。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):  <span class="comment"># 用 __str__ 这个内置方法能够打印自定义的内容。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.date&#125;</span>, <span class="subst">&#123;self.order_id&#125;</span>, <span class="subst">&#123;self.money&#125;</span>, <span class="subst">&#123;self.province&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="file-define-py"><a href="#file-define-py" class="headerlink" title="file_define.py"></a>file_define.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">定义和文件相关的类</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> data_define <span class="keyword">import</span> Record</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先定义一个抽象类用来做顶层设计，确定有哪些功能需要实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileReader</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_data</span>(<span class="params">self</span>) -&gt; <span class="built_in">list</span>[Record]:  <span class="comment"># 读取的返回值类型应该都是记录类的类型</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;读取文件的数据，读到的每一条数据都转换为Record对象，将它们都封装到list内返回即可&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TextFileReader</span>(<span class="title class_ inherited__">FileReader</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, path</span>):</span><br><span class="line">        self.path = path  <span class="comment"># 定义成员变量记录文件的路径</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 复写（实现抽象方法）父类的方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_data</span>(<span class="params">self</span>) -&gt; <span class="built_in">list</span>[Record]:</span><br><span class="line">        f = <span class="built_in">open</span>(self.path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">        record_list: <span class="built_in">list</span>[Record] = []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">            line = line.strip()  <span class="comment"># 消除读取到的每一行数据中的\n</span></span><br><span class="line">            <span class="comment"># 字符串.strip()移除首尾的空格和换行符，字符串.strip(字符串)移除首尾的指定字符串</span></span><br><span class="line">            data_list = line.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">            record = Record(data_list[<span class="number">0</span>], data_list[<span class="number">1</span>], <span class="built_in">int</span>(data_list[<span class="number">2</span>]), data_list[<span class="number">3</span>])</span><br><span class="line">            record_list.append(record)</span><br><span class="line"></span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">return</span> record_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JsonFileReader</span>(<span class="title class_ inherited__">FileReader</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, path</span>):</span><br><span class="line">        self.path = path  <span class="comment"># 定义成员变量记录文件的路径</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_data</span>(<span class="params">self</span>) -&gt; <span class="built_in">list</span>[Record]:</span><br><span class="line">        f = <span class="built_in">open</span>(self.path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">        record_list: <span class="built_in">list</span>[Record] = []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">            data_dict = json.loads(line)</span><br><span class="line">            record = Record(</span><br><span class="line">                data_dict[<span class="string">&quot;date&quot;</span>],  <span class="comment"># 字典[Key]，获取指定Key对应的Value值</span></span><br><span class="line">                data_dict[<span class="string">&quot;order_id&quot;</span>],</span><br><span class="line">                data_dict[<span class="string">&quot;money&quot;</span>],</span><br><span class="line">                <span class="comment"># 数据文件中key=&quot;money&quot;对应的value的值的类型本身就是int类型，在数据转换的之后还是int类型，</span></span><br><span class="line">                <span class="comment"># 所以可以不用加int()来强制类型转换，如果是带引号的str类型或者其他类型，那就需要进行类型转换，加了也更保险一点</span></span><br><span class="line">                data_dict[<span class="string">&quot;province&quot;</span>],</span><br><span class="line">            )</span><br><span class="line">            record_list.append(record)</span><br><span class="line"></span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">return</span> record_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    text_file_reader = TextFileReader(<span class="string">&quot;D:/Desktop/Python/2011年1月销售数据.txt&quot;</span>)</span><br><span class="line">    json_file_reader = JsonFileReader(<span class="string">&quot;D:/Desktop/Python/2011年2月销售数据JSON.txt&quot;</span>)</span><br><span class="line">    list1 = text_file_reader.read_data()</span><br><span class="line">    list2 = json_file_reader.read_data()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> list1:</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> list2:</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<h4 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">面向对象，数据分析案例，主业务逻辑代码</span></span><br><span class="line"><span class="string">实现步骤：</span></span><br><span class="line"><span class="string">1. 设计一个类，可以完成数据的封装</span></span><br><span class="line"><span class="string">2. 设计一个抽象类，定义文件读取的相关功能，并使用子类实现具体功能</span></span><br><span class="line"><span class="string">3. 读取文件，生产数据对象</span></span><br><span class="line"><span class="string">4. 进行数据需求的逻辑计算（计算每一天的销售额）</span></span><br><span class="line"><span class="string">5. 通过PyEcharts进行图形绘制</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> file_define <span class="keyword">import</span> TextFileReader, JsonFileReader</span><br><span class="line"><span class="keyword">from</span> data_define <span class="keyword">import</span> Record</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">text_file_reader = TextFileReader(<span class="string">&quot;D:/Desktop/Python/2011年1月销售数据.txt&quot;</span>)</span><br><span class="line">json_file_reader = JsonFileReader(<span class="string">&quot;D:/Desktop/Python/2011年2月销售数据JSON.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">jan_data: <span class="built_in">list</span>[Record] = text_file_reader.read_data()</span><br><span class="line">feb_data: <span class="built_in">list</span>[Record] = json_file_reader.read_data()</span><br><span class="line"><span class="comment"># 将2个月份的数据合并为1个list来存储</span></span><br><span class="line"><span class="comment"># all_data: list[Record] = jan_data + feb_data</span></span><br><span class="line">jan_data.extend(feb_data)  <span class="comment"># 用我们之前学过的extend()方法也是没问题的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始进行数据计算</span></span><br><span class="line"><span class="comment"># &#123;&quot;2011-01-01&quot;: 1534, &quot;2011-01-02&quot;: 300, &quot;2011-01-03&quot;: 650&#125;</span></span><br><span class="line">data_dict = &#123;&#125;  <span class="comment"># 再次提示，字典里用的是键值对的形式，如上↑</span></span><br><span class="line"><span class="comment"># for record in all_data:</span></span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> jan_data:</span><br><span class="line">    <span class="keyword">if</span> record.date <span class="keyword">in</span> data_dict.keys():</span><br><span class="line">        <span class="comment"># 当前日期已经有记录了，把新记录的钱和老记录的钱做累加就行了</span></span><br><span class="line">        data_dict[record.date] += record.money</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data_dict[record.date] = record.money</span><br><span class="line"><span class="built_in">print</span>(data_dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化图表开发</span></span><br><span class="line"><span class="comment"># 设置x轴和y轴数据</span></span><br><span class="line">x = <span class="built_in">list</span>(data_dict.keys())  <span class="comment"># x轴数据</span></span><br><span class="line">y = <span class="built_in">list</span>(data_dict.values())  <span class="comment"># y轴数据</span></span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&quot;font.sans-serif&quot;</span>] = [<span class="string">&quot;SimHei&quot;</span>]  <span class="comment"># 用于正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&quot;axes.unicode_minus&quot;</span>] = <span class="literal">False</span>  <span class="comment"># 用来正常显示负号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建柱状图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">6</span>))  <span class="comment"># 因为x轴数据太多，需要大一点的画布</span></span><br><span class="line">plt.bar(x, y, color=<span class="string">&quot;#32a5d7&quot;</span>, label=<span class="string">&quot;销售额&quot;</span>)  <span class="comment"># 绘制柱状图</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加图表标题和轴标签</span></span><br><span class="line">plt.title(<span class="string">&quot;每日销售额&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;日期&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;销售额&quot;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图表</span></span><br><span class="line">plt.xticks(rotation=<span class="number">45</span>)  <span class="comment"># 旋转x轴标签，防止重叠</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202410092103628.png" alt=""></p>
<blockquote>
<p>&emsp;&emsp;图片截取自：Spyder 6</p>
</blockquote>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/11/05/Python/" title="Python基础篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202411041950107.jpg" onerror="onerror=null;src='https://hakihi.oss-cn-shanghai.aliyuncs.com/images/0YQ(VML%25%25RASJNCNK7BQ2K4_tmb.png'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Python基础篇</div></div></a></div><div class="next-post pull-right"><a href="/2024/11/05/Java/" title="Java基础篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202411041943215.jpg" onerror="onerror=null;src='https://hakihi.oss-cn-shanghai.aliyuncs.com/images/0YQ(VML%25%25RASJNCNK7BQ2K4_tmb.png'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java基础篇</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/11/05/Python/" title="Python基础篇"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://hakihi.oss-cn-shanghai.aliyuncs.com/img/202411041950107.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-05</div><div class="title">Python基础篇</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">Python 数据可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#matplotlib"><span class="toc-number">1.1.</span> <span class="toc-text">matplotlib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mpld3"><span class="toc-number">1.2.</span> <span class="toc-text">mpld3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spyder"><span class="toc-number">1.3.</span> <span class="toc-text">Spyder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%B6%E5%9B%BE%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.4.</span> <span class="toc-text">制图步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E5%AE%89%E8%A3%85-matplotlib"><span class="toc-number">1.4.1.</span> <span class="toc-text">① 安装 matplotlib</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E5%AF%BC%E5%85%A5-matplotlib-pyplot"><span class="toc-number">1.4.2.</span> <span class="toc-text">② 导入 matplotlib.pyplot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.3.</span> <span class="toc-text">③ 准备数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.4.4.</span> <span class="toc-text">④ 绘制图形</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-%E5%AE%9A%E5%88%B6%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.4.5.</span> <span class="toc-text">⑤ 定制图形</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5-%E6%98%BE%E7%A4%BA%E6%88%96%E4%BF%9D%E5%AD%98%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.4.6.</span> <span class="toc-text">⑥ 显示或保存图形</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A6-%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E4%BD%BF%E7%94%A8-subplots-%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E5%AD%90%E5%9B%BE"><span class="toc-number">1.4.7.</span> <span class="toc-text">⑦ （可选）使用 subplots 创建多个子图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A7-%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89Pandas"><span class="toc-number">1.4.8.</span> <span class="toc-text">⑧ （可选）Pandas</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%98%E5%9B%BE%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">1.4.9.</span> <span class="toc-text">绘图示例：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-number">1.4.10.</span> <span class="toc-text">注意事项：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%9B%BE%E5%BD%A2"><span class="toc-number">1.5.</span> <span class="toc-text">常用图形</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E5%9B%BE%EF%BC%88Line-Plot%EF%BC%89"><span class="toc-number">1.5.1.</span> <span class="toc-text">线图（Line Plot）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE-Scatter-Plot"><span class="toc-number">1.5.2.</span> <span class="toc-text">散点图 (Scatter Plot)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE-Bar-Chart"><span class="toc-number">1.5.3.</span> <span class="toc-text">条形图 (Bar Chart)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE-Histogram"><span class="toc-number">1.5.4.</span> <span class="toc-text">直方图 (Histogram)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A5%BC%E5%9B%BE-Pie-Chart"><span class="toc-number">1.5.5.</span> <span class="toc-text">饼图 (Pie Chart)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text">Python 面向对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.1.</span> <span class="toc-text">类和对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.1.</span> <span class="toc-text">定义</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">对象</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.2.</span> <span class="toc-text">魔术方法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#init-%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">__init__ (构造方法)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#str"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">__str__</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#del"><span class="toc-number">2.1.2.3.</span> <span class="toc-text">__del__</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">2.1.2.4.</span> <span class="toc-text">运算符重载</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">2.2.</span> <span class="toc-text">封装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E6%88%90%E5%91%98"><span class="toc-number">2.2.2.</span> <span class="toc-text">私有成员</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">2.3.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-2"><span class="toc-number">2.3.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%BB%A7%E6%89%BF"><span class="toc-number">2.3.2.</span> <span class="toc-text">单继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E6%80%A7"><span class="toc-number">2.3.3.</span> <span class="toc-text">传递性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF"><span class="toc-number">2.3.4.</span> <span class="toc-text">多继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E5%86%99%EF%BC%88%E9%87%8D%E5%86%99%EF%BC%89"><span class="toc-number">2.3.5.</span> <span class="toc-text">复写（重写）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.</span> <span class="toc-text">类型注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-3"><span class="toc-number">2.4.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.2.</span> <span class="toc-text">变量注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.3.</span> <span class="toc-text">函数注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Union-%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.4.</span> <span class="toc-text">Union 联合类型注解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">2.5.</span> <span class="toc-text">多态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-4"><span class="toc-number">2.5.1.</span> <span class="toc-text">定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B"><span class="toc-number">3.</span> <span class="toc-text">Python 数据分析案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON"><span class="toc-number">3.1.</span> <span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">3.2.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data-define-py"><span class="toc-number">3.2.1.</span> <span class="toc-text">data_define.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#file-define-py"><span class="toc-number">3.2.2.</span> <span class="toc-text">file_define.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#main-py"><span class="toc-number">3.2.3.</span> <span class="toc-text">main.py</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Akihi</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">简</button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="/js/tw_cn.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script async src="https://npm.elemecdn.com/vue@2.6.14/dist/vue.min.js"></script><script async src="https://npm.elemecdn.com/element-ui@2.15.6/lib/index.js"></script><script src="/js/sun_moon.js" async></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.0/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.63.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.12.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v7.0.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.12.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-ffa3c8?logo=bluesky&amp;logoColor=ffa3c8" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-d42328?logo=googleanalytics&amp;logoColor=ff2d2d" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" data-title="本站已通过官方备案，备案号：苏ICP备2024151681号" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%8B%8FICP%E5%A4%87-2024151681%E5%8F%B7-FFBB00?logo=hackthebox&amp;logoColor=%23FFBB00" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-b41eff?logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%25204.0-bright?logo=adguard" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeIn');
    arr[i].setAttribute('data-wow-duration', '1.2s');
    arr[i].setAttribute('data-wow-delay', '0.3s');
    arr[i].setAttribute('data-wow-offset', '160');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__fadeIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/lib/hexo-butterfly-clock-anzhiyu/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    console.log('容器元素:', parent_div_git)
    if(parent_div_git) {
      // 检查是否已经注入过，避免重复注入
      if (parent_div_git.querySelector('.card-clock')) {
        console.log('时钟已存在，跳过注入')
        return;
      }
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('时钟HTML已插入到容器')
      
      // HTML插入后，动态加载时钟脚本
      function loadClockScript() {
        // 检查脚本是否已经加载
        if (document.querySelector('script[src="/lib/hexo-butterfly-clock-anzhiyu/clock.js"]')) {
          console.log('时钟脚本已加载')
          return;
        }
        
        // 确保全局变量在window对象上，以便时钟脚本访问
        if (typeof window.qweather_key === 'undefined') {
          window.qweather_key = 'aa3283a8cbe248be9a0afa4939b6be2b';
        }
        if (typeof window.gaud_map_key === 'undefined') {
          window.gaud_map_key = 'df05f260055b8ab2e667ac8a7b51aa61';
        }
        if (typeof window.clock_rectangle === 'undefined') {
          window.clock_rectangle = '120.278361,31.580570';
        }
        if (typeof window.clock_default_rectangle_enable === 'undefined') {
          window.clock_default_rectangle_enable = 'false';
        }
        
        // 先加载ip_api（如果需要）
        if ('') {
          var ipScript = document.createElement('script');
          ipScript.src = '';
          ipScript.onload = function() {
            loadClockMainScript();
          };
          ipScript.onerror = function() {
            console.warn('ip_api加载失败，继续加载时钟脚本');
            loadClockMainScript();
          };
          document.head.appendChild(ipScript);
        } else {
          loadClockMainScript();
        }
      }
      
      function loadClockMainScript() {
        var clockScript = document.createElement('script');
        var scriptUrl = '/lib/hexo-butterfly-clock-anzhiyu/clock.js';
        console.log('准备加载时钟脚本，URL:', scriptUrl);
        clockScript.src = scriptUrl;
        clockScript.setAttribute('data-pjax', '');
        clockScript.onload = function() {
          console.log('时钟脚本加载完成')
          // 等待脚本执行并检查初始化
          checkAndInitClock();
        };
        
        function checkAndInitClock() {
          var clockElement = document.getElementById('hexo_electric_clock');
          if (!clockElement) {
            console.warn('时钟元素不存在，等待DOM更新...');
            setTimeout(checkAndInitClock, 100);
            return;
          }
          
          // 使用轮询机制持续检查，最多检查20次（总共10秒）
          var checkCount = 0;
          var maxChecks = 20;
          var checkInterval = 500; // 每500ms检查一次
          
          function pollClockContent() {
            checkCount++;
            var clockEl = document.getElementById('hexo_electric_clock');
            if (!clockEl) {
              if (checkCount < maxChecks) {
                setTimeout(pollClockContent, checkInterval);
              } else {
                console.error('时钟元素不存在，已达到最大检查次数');
              }
              return;
            }
            
            var loadingImg = clockEl.querySelector('#card-clock-loading');
            var innerHTML = clockEl.innerHTML.trim();
            var hasContent = innerHTML !== '' && 
                            (!loadingImg || loadingImg.style.display === 'none' || loadingImg.offsetParent === null);
            
            if (hasContent) {
              console.log('时钟已成功初始化，检查次数:', checkCount);
            } else {
              if (checkCount < maxChecks) {
                if (checkCount === 1) {
                  console.log('时钟内容为空，开始轮询检查...');
                }
                setTimeout(pollClockContent, checkInterval);
              } else {
                console.warn('时钟元素存在但内容仍为空，已达到最大检查次数');
                console.log('时钟元素HTML:', innerHTML.substring(0, 300));
                console.log('loading图片状态:', loadingImg ? {
                  display: loadingImg.style.display,
                  offsetParent: loadingImg.offsetParent,
                  visible: loadingImg.offsetParent !== null
                } : '不存在');
                // 尝试触发window load事件
                if (document.readyState === 'complete') {
                  window.dispatchEvent(new Event('load'));
                }
                // 尝试手动触发resize事件，某些脚本可能在等待这个事件
                window.dispatchEvent(new Event('resize'));
              }
            }
          }
          
          // 开始轮询检查
          pollClockContent();
        }
        clockScript.onerror = function(event) {
          console.error('时钟脚本加载失败，URL:', scriptUrl);
          console.error('错误详情:', event);
          // 尝试使用备用CDN
          var fallbackUrls = [];
          if (scriptUrl.includes('npm.elemecdn.com')) {
            fallbackUrls = [
              scriptUrl.replace('npm.elemecdn.com', 'cdn.cbd.int'),
              scriptUrl.replace('npm.elemecdn.com', 'unpkg.com'),
              scriptUrl.replace('npm.elemecdn.com', 'cdn.jsdelivr.net/npm')
            ];
          }
          if (fallbackUrls.length > 0) {
            tryFallbackCDN(fallbackUrls, 0);
          }
        };
        
        function checkAndInitClockFallback() {
          var clockElement = document.getElementById('hexo_electric_clock');
          if (!clockElement) {
            console.warn('时钟元素不存在（备用CDN），等待DOM更新...');
            setTimeout(checkAndInitClockFallback, 100);
            return;
          }
          
          // 使用轮询机制持续检查，最多检查20次（总共10秒）
          var checkCount = 0;
          var maxChecks = 20;
          var checkInterval = 500; // 每500ms检查一次
          
          function pollClockContent() {
            checkCount++;
            var clockEl = document.getElementById('hexo_electric_clock');
            if (!clockEl) {
              if (checkCount < maxChecks) {
                setTimeout(pollClockContent, checkInterval);
              } else {
                console.error('时钟元素不存在（备用CDN），已达到最大检查次数');
              }
              return;
            }
            
            var loadingImg = clockEl.querySelector('#card-clock-loading');
            var innerHTML = clockEl.innerHTML.trim();
            var hasContent = innerHTML !== '' && 
                            (!loadingImg || loadingImg.style.display === 'none' || loadingImg.offsetParent === null);
            
            if (hasContent) {
              console.log('时钟已成功初始化（备用CDN），检查次数:', checkCount);
            } else {
              if (checkCount < maxChecks) {
                if (checkCount === 1) {
                  console.log('时钟内容为空（备用CDN），开始轮询检查...');
                }
                setTimeout(pollClockContent, checkInterval);
              } else {
                console.warn('时钟元素存在但内容仍为空（备用CDN），已达到最大检查次数');
                console.log('时钟元素HTML:', innerHTML.substring(0, 300));
                console.log('loading图片状态:', loadingImg ? {
                  display: loadingImg.style.display,
                  offsetParent: loadingImg.offsetParent,
                  visible: loadingImg.offsetParent !== null
                } : '不存在');
                // 尝试触发window load事件
                if (document.readyState === 'complete') {
                  window.dispatchEvent(new Event('load'));
                }
                // 尝试手动触发resize事件，某些脚本可能在等待这个事件
                window.dispatchEvent(new Event('resize'));
              }
            }
          }
          
          // 开始轮询检查
          pollClockContent();
        }
        
        function tryFallbackCDN(urls, index) {
          if (index >= urls.length) {
            console.error('所有CDN源都加载失败');
            return;
          }
          console.log('尝试使用备用CDN ' + (index + 1) + '/' + urls.length + ':', urls[index]);
          
          // 确保全局变量在window对象上，以便时钟脚本访问
          if (typeof window.qweather_key === 'undefined') {
            window.qweather_key = 'aa3283a8cbe248be9a0afa4939b6be2b';
          }
          if (typeof window.gaud_map_key === 'undefined') {
            window.gaud_map_key = 'df05f260055b8ab2e667ac8a7b51aa61';
          }
          if (typeof window.clock_rectangle === 'undefined') {
            window.clock_rectangle = '120.278361,31.580570';
          }
          if (typeof window.clock_default_rectangle_enable === 'undefined') {
            window.clock_default_rectangle_enable = 'false';
          }
          console.log('已设置全局变量（备用CDN）:', {
            qweather_key: window.qweather_key ? '已设置' : '未设置',
            gaud_map_key: window.gaud_map_key ? '已设置' : '未设置',
            clock_rectangle: window.clock_rectangle ? '已设置' : '未设置',
            clock_default_rectangle_enable: window.clock_default_rectangle_enable
          });
          
          var fallbackScript = document.createElement('script');
          fallbackScript.src = urls[index];
          fallbackScript.setAttribute('data-pjax', '');
          fallbackScript.onload = function() {
            console.log('备用CDN加载成功:', urls[index]);
            // 使用相同的检查逻辑
            checkAndInitClockFallback();
          };
          fallbackScript.onerror = function() {
            console.warn('备用CDN加载失败:', urls[index]);
            tryFallbackCDN(urls, index + 1);
          };
          document.head.appendChild(fallbackScript);
        }
        document.head.appendChild(clockScript);
      }
      
      // 延迟加载脚本，确保DOM已更新
      setTimeout(loadClockScript, 50);
    } else {
      console.warn('警告: 找不到容器元素，将在100ms后重试')
      // 重试机制：最多重试10次
      var retryCount = 0;
      var maxRetries = 10;
      var retryTimer = setInterval(function() {
        retryCount++;
        var retryElement = document.getElementsByClassName('sticky_layout')[0];
        if (retryElement) {
          clearInterval(retryTimer);
          if (!retryElement.querySelector('.card-clock')) {
            retryElement.insertAdjacentHTML("afterbegin",item_html)
            console.log('时钟HTML已插入到容器（重试成功）')
            // 重试成功后也加载脚本
            function checkAndInitClockRetry() {
              var clockElement = document.getElementById('hexo_electric_clock');
              if (!clockElement) {
                setTimeout(checkAndInitClockRetry, 100);
                return;
              }
              var loadingImg = clockElement.querySelector('#card-clock-loading');
              var hasContent = clockElement.innerHTML.trim() !== '' && 
                              (!loadingImg || loadingImg.style.display === 'none');
              if (!hasContent) {
                setTimeout(function() {
                  var clockElement2 = document.getElementById('hexo_electric_clock');
                  if (clockElement2) {
                    var loadingImg2 = clockElement2.querySelector('#card-clock-loading');
                    var hasContent2 = clockElement2.innerHTML.trim() !== '' && 
                                     (!loadingImg2 || loadingImg2.style.display === 'none');
                    if (!hasContent2) {
                      console.warn('时钟元素存在但内容仍为空（重试后）');
                      if (document.readyState === 'complete') {
                        window.dispatchEvent(new Event('load'));
                      }
                    } else {
                      console.log('时钟已成功初始化（重试后）');
                    }
                  }
                }, 2000);
              } else {
                console.log('时钟已成功初始化（重试后）');
              }
            }
            
            function checkAndInitClockRetryFallback() {
              var clockElement = document.getElementById('hexo_electric_clock');
              if (!clockElement) {
                setTimeout(checkAndInitClockRetryFallback, 100);
                return;
              }
              var loadingImg = clockElement.querySelector('#card-clock-loading');
              var hasContent = clockElement.innerHTML.trim() !== '' && 
                              (!loadingImg || loadingImg.style.display === 'none');
              if (!hasContent) {
                setTimeout(function() {
                  var clockElement2 = document.getElementById('hexo_electric_clock');
                  if (clockElement2) {
                    var loadingImg2 = clockElement2.querySelector('#card-clock-loading');
                    var hasContent2 = clockElement2.innerHTML.trim() !== '' && 
                                     (!loadingImg2 || loadingImg2.style.display === 'none');
                    if (!hasContent2) {
                      console.warn('时钟元素存在但内容仍为空（重试后备用CDN）');
                      if (document.readyState === 'complete') {
                        window.dispatchEvent(new Event('load'));
                      }
                    } else {
                      console.log('时钟已成功初始化（重试后备用CDN）');
                    }
                  }
                }, 2000);
              } else {
                console.log('时钟已成功初始化（重试后备用CDN）');
              }
            }
            
            function tryFallbackCDNRetry(urls, index) {
              if (index >= urls.length) {
                console.error('所有CDN源都加载失败（重试后）');
                return;
              }
              console.log('尝试使用备用CDN ' + (index + 1) + '/' + urls.length + '（重试后）:', urls[index]);
              
              // 确保全局变量在window对象上，以便时钟脚本访问
              if (typeof window.qweather_key === 'undefined') {
                window.qweather_key = 'aa3283a8cbe248be9a0afa4939b6be2b';
              }
              if (typeof window.gaud_map_key === 'undefined') {
                window.gaud_map_key = 'df05f260055b8ab2e667ac8a7b51aa61';
              }
              if (typeof window.clock_rectangle === 'undefined') {
                window.clock_rectangle = '120.278361,31.580570';
              }
              if (typeof window.clock_default_rectangle_enable === 'undefined') {
                window.clock_default_rectangle_enable = 'false';
              }
              console.log('已设置全局变量（重试后备用CDN）:', {
                qweather_key: window.qweather_key ? '已设置' : '未设置',
                gaud_map_key: window.gaud_map_key ? '已设置' : '未设置',
                clock_rectangle: window.clock_rectangle ? '已设置' : '未设置',
                clock_default_rectangle_enable: window.clock_default_rectangle_enable
              });
              
              var fallbackScript = document.createElement('script');
              fallbackScript.src = urls[index];
              fallbackScript.setAttribute('data-pjax', '');
              fallbackScript.onload = function() {
                console.log('备用CDN加载成功（重试后）:', urls[index]);
                checkAndInitClockRetryFallback();
              };
              fallbackScript.onerror = function() {
                console.warn('备用CDN加载失败（重试后）:', urls[index]);
                tryFallbackCDNRetry(urls, index + 1);
              };
              document.head.appendChild(fallbackScript);
            }
            
            setTimeout(function() {
              var clockScript = document.createElement('script');
              var scriptUrl = '/lib/hexo-butterfly-clock-anzhiyu/clock.js';
              console.log('准备加载时钟脚本（重试后），URL:', scriptUrl);
              clockScript.src = scriptUrl;
              clockScript.setAttribute('data-pjax', '');
              clockScript.onload = function() {
                console.log('时钟脚本加载完成（重试后）');
                checkAndInitClockRetry();
              };
              clockScript.onerror = function(event) {
                console.error('时钟脚本加载失败（重试后），URL:', scriptUrl);
                console.error('错误详情:', event);
                // 尝试使用备用CDN
                var fallbackUrls = [];
                if (scriptUrl.includes('npm.elemecdn.com')) {
                  fallbackUrls = [
                    scriptUrl.replace('npm.elemecdn.com', 'cdn.cbd.int'),
                    scriptUrl.replace('npm.elemecdn.com', 'unpkg.com'),
                    scriptUrl.replace('npm.elemecdn.com', 'cdn.jsdelivr.net/npm')
                  ];
                }
                if (fallbackUrls.length > 0) {
                  tryFallbackCDNRetry(fallbackUrls, 0);
                }
              };
              if ('') {
                var ipScript = document.createElement('script');
                ipScript.src = '';
                ipScript.onload = function() {
                  document.head.appendChild(clockScript);
                };
                ipScript.onerror = function() {
                  // IP API加载失败时仍然加载时钟脚本
                  document.head.appendChild(clockScript);
                };
                document.head.appendChild(ipScript);
              } else {
                document.head.appendChild(clockScript);
              }
            }, 50);
          }
        } else if (retryCount >= maxRetries) {
          clearInterval(retryTimer);
          console.error('错误: 经过' + maxRetries + '次重试后仍找不到容器元素')
        }
      }, 100);
    }
  }
  var elist = ''.split(',').filter(function(item) { return item.trim() !== ''; });
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'aa3283a8cbe248be9a0afa4939b6be2b';
  var gaud_map_key = 'df05f260055b8ab2e667ac8a7b51aa61';
  var flag = 0;
  var clock_rectangle = '120.278361,31.580570';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (elist[i] && cpage.includes(elist[i])){
      flag++;
    }
  }

  function shouldInject() {
    // 如果enable_page是'all'，且不在排除列表中
    if (epage === 'all' && flag === 0) {
      return true;
    }
    // 如果enable_page是'/'，匹配首页
    if (epage === '/' && (cpage === '/' || cpage === '/index.html' || cpage === '')) {
      return flag === 0;
    }
    // 精确匹配页面路径
    if (epage === cpage) {
      return flag === 0;
    }
    return false;
  }

  function initClock() {
    if (shouldInject()) {
      // 等待DOM加载完成
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', butterfly_clock_anzhiyu_injector_config);
      } else {
        // DOM已经加载完成，直接执行
    butterfly_clock_anzhiyu_injector_config();
      }
    }
  }

  initClock();
  </script><link rel="stylesheet" href="/lib/hexo-butterfly-clock-anzhiyu/clock.min.css" /><!-- hexo injector body_end end --></body></html>